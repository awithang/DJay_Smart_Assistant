# Feature Specification: Natural Language Trade Advisor

## Overview
This feature enhances the **DJAY Smart Assistant Dashboard** by transforming raw technical data (Trend, Zone, EMA, Signals) into a single, actionable natural language sentence. This aims to reduce cognitive load for the trader by providing a clear "Advisor" summary.

## 1. UI Modification
**Target Area:** The "STRATEGY SIGNAL" section of the dashboard panel (Bottom-Left).

### Changes:
1.  **Remove:** The raw "EMA Distance" lines (e.g., `M15 (100/200): -1763 / -5247`).
    *   *Reason:* Raw point distances are hard to interpret quickly.
2.  **Add:** A text-wrapping label or two lines of text labeled **"Advisor:"**.
    *   *Font:* slightly larger or distinct color (e.g., Cyan or White).
    *   *Location:* Between "Trend" and "PA Signal" (or replacing the EMA section).

## 2. Logic Matrix (The Brain)

The "Advisor" message is generated by combining three factors:
1.  **Trend Direction** (Strong Up/Down, Weak Up/Down, Flat)
2.  **Zone Proximity** (At Support, At Resistance, No Man's Land)
3.  **Signal Status** (Buy Signal, Sell Signal, None)

### State Definitions

**A. Trend State (Existing Logic)**
*   `UP`: Strong Uptrend / Uptrend / Weak Uptrend
*   `DOWN`: Strong Downtrend / Downtrend / Weak Downtrend
*   `FLAT`: Sideways

**B. Zone State (New Logic)**
*   `SUPPORT`: Price is within tolerance of a Buy Zone (Green).
*   `RESISTANCE`: Price is within tolerance of a Sell Zone (PeachPuff).
*   `MIDDLE`: Price is between zones (standard).

**C. Extension State (Simplified EMA Logic)**
*   `EXTENDED`: Price is far from EMA (e.g., > 500 pts on M15).
*   `NORMAL`: Price is close to equilibrium.

### Generated Messages Table

| Trend | Zone Location | Signal | **Advisor Message (Output)** |
| :--- | :--- | :--- | :--- |
| **UP** | **Support** | **Buy** | "üî• PERFECT BUY: Uptrend bounce off support with signal!" |
| **UP** | **Support** | None | "Uptrend pullback to support. Watch for BUY signal." |
| **UP** | **Resistance** | **Sell** | "‚ö†Ô∏è Counter-trend Sell signal at resistance. Scalp with caution." |
| **UP** | **Resistance** | None | "Strong Uptrend hitting resistance. Wait for breakout or pullback." |
| **UP** | Middle | None | "Trend is Up. Wait for pullback to better price." |
| **DOWN**| **Resistance**| **Sell** | "üî• PERFECT SELL: Downtrend rejection at resistance!" |
| **DOWN**| **Resistance**| None | "Downtrend rally to resistance. Watch for SELL signal." |
| **DOWN**| **Support** | **Buy** | "‚ö†Ô∏è Counter-trend Buy signal at support. Scalp with caution." |
| **DOWN**| **Support** | None | "Strong Downtrend hitting support. Wait for breakdown or bounce." |
| **FLAT**| **Support** | **Buy** | "Range bounce. Buying at support." |
| **FLAT**| **Resistance**| **Sell** | "Range rejection. Selling at resistance." |
| **FLAT**| Middle | Any | "Market is choppy/sideways. Best to stay out." |

## 3. Implementation Details

### Helper Function: `GetAdvisorMessage()`
Create a function in `CSignalEngine` or `CDashboardPanel` that evaluates the current state and returns the string.

```mql5
string GetAdvisorMessage()
{
    // 1. Get Trend
    ENUM_TREND_DIRECTION trend = GetTrendDirection();
    
    // 2. Get Zone Status
    ENUM_ZONE_STATUS zone = GetCurrentZoneStatus();
    
    // 3. Get Active Signal
    ENUM_SIGNAL_TYPE sig = GetActiveSignal();

    // Logic Tree
    if(trend == TREND_UP)
    {
        if(zone == ZONE_STATUS_IN_BUY1 || zone == ZONE_STATUS_IN_BUY2)
        {
            if(sig == SIGNAL_PA_BUY) return "üî• PERFECT BUY: Trend + Support + Signal!";
            return "Valid Buy Zone. Waiting for PA Signal...";
        }
        if(zone == ZONE_STATUS_IN_SELL1 || zone == ZONE_STATUS_IN_SELL2)
        {
            if(sig == SIGNAL_PA_SELL) return "‚ö†Ô∏è Counter-trend Sell. Risky.";
            return "Hit Resistance. Watch for Breakout or Pullback.";
        }
    }
    // ... repeat for DOWN and FLAT ...
    
    return "Scanning market...";
}
```

## 4. Prioritization
This feature should be implemented alongside the **Chart Zones** update, as the "Zone Status" logic is shared between the visual chart and this text advisor.

---
**Status:** Ready for Development.
